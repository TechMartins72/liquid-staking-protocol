module GlobalStatesAndWitnesses{
    import CompactStandardLibrary;
    /** Globally accessible ledger state */
    export {StakePrivateState, Stake, StakeStatus, StakePoolStatus};
    /** Tracks protocol total I/O */
    export ledger total_stAsset_Minted: Uint<128>;
    export ledger total_rewards_accrued: Uint<128>;
    export ledger total_stake_withdrawn: Uint<128>; 

    /** Tracks protocol coin I/O */
    export ledger protocolTVL: QualifiedCoinInfo; // It's value reflect the total underlaying assets
    export ledger stakePoolStatus: StakePoolStatus;

    /** Record the entire stake entries */
    export ledger stakings: Map<Bytes<32>, Stake>; // Collection of all availabling stakes in the contract
    export sealed ledger validAssetCoinType: Bytes<32>;
    export sealed ledger superAdmin: Bytes<32>;
    export ledger admins: Set<Bytes<32>>;

    /** Third party delegation contract address */
    export sealed ledger delegationContractAddress: Bytes<32>; 
    /** Minting params */
    export ledger nonce: Bytes<32>;
    export ledger mintCounter: Counter;
    export sealed ledger stAssetDomainSeparator: Bytes<32>;


    /** Enable token decimal representation */
    export sealed ledger SCALE_FACTOR: Uint<32>; // 1_000_000 SUBUNITS PER UNIT ASSET

    /** Staker data types (Onchain and offchain) */
    enum StakeStatus {open, closed};
    enum StakePoolStatus {available, delegated};

    struct Stake {
        staker_id: Bytes<32>;
        stake_hash: Bytes<32>;
        created_at: Uint<64>;
        status: StakeStatus
    }; 

    struct StakePrivateState {
       stAssets_minted: Uint<64>;
       deposit_amount: Uint<64>;
       redeemable: Uint<64>;
    } 


    /** Witnesses */
    export witness get_stake_private_state(): StakePrivateState;
    export witness update_stake_private_state(metadata: StakePrivateState): [];
    export witness divide(numerator: Uint<64>, denominator: Uint<64>): [Uint<64>, Uint<64>];
    export witness secrete_key(): Bytes<32>;
    export witness get_current_time(): Uint<64>;
    export witness call_backend_for_delegation(amount: Uint<128>): Boolean; // Just for third party simulatin purpose (TESTING ONLY)
}